/*! Copyright Â© 2015 Atlassian */
!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}({0:function(e,t,n){"use strict";!function(){function e(e){return Math.floor(Math.random()*e)}function t(t){return d[t][e(d[t].length)]}function o(e){$(".loading-message > p").text(e)}function r(){f.push(a("hipchat.client.load.timeout.1")),o(t("happy"))}function i(){f.push(a("hipchat.client.load.timeout.2")),o(t("sad"))}function a(e){return{server:"gid-"+$("meta[name='gid']").attr("content"),product:"HipChat",subproduct:"hc_web",user:"uid-"+$("meta[name='uid']").attr("content"),properties:{client:"web"},name:e,serverTime:(new Date).getTime()}}function s(){f.push(a("hipchat.client.load.failed")),o("Something's gone terribly wrong."),$(".loading-message > p").after("<p>We've informed headquarters.</p><p>Please reload to try again.</p>"),$(".loading-message").addClass("sad"),$(".loading-message svg > use").attr("xlink:href","#icon-hipchat-logo-sad")}var u=1e4,d=n(9),f=(n(1),[]),p={queue:f,storage_key:"web-client-pre-load-key",server:"gid-"+$("meta[name='gid']").attr("content"),product:"HipChat",subproduct:"hc_web",user:"uid-"+$("meta[name='uid']").attr("content")};window["herment-gas-client"](p).start(),f.push(a("hipchat.client.load.begin"));var c=[setTimeout(r,u),setTimeout(i,2*u),setTimeout(s,3*u)];$(document).one("app-state-ready",function(){$(".loading-message").remove(),c.forEach(function(e){return clearTimeout(e)}),f.push(a("hipchat.client.load.end"))})}()},1:function(e,t,n){!function(){var e;e=function(e){var t,n={},o="herment",r=100;return n.getServerName=function(){var e;return"undefined"!=typeof document.location&&"undefined"!=typeof document.location.hostname&&(e=document.location.hostname),""===e&&(e="-"),e},n.getProductNameFromServerName=function(e){return"undefined"!=typeof e?e.replace(".com","").replace(".net","").replace(".org","").replace(".au","").replace(".io",""):"-"},n.getSubdomain=function(e){var t="-",n=e.match(/^([a-z0-9\.]*)[\-\.]{1}([a-z0-9]+)+\.([a-z]{2,6})$/i);if(n){var o=e.split(".");o=2===o[o.length-1].length?o.slice(0,o.length-3):o.slice(0,o.length-2),0!==o.length&&(t=o.join("."))}return t},n.generateRandomStorageKey=function(){var e=2,t=12,n=(Math.random()+"").slice(e,t),o=(Math.random()+"").slice(e,t);return n.concat(o)},n.ajaxPost=function(e,t){var n;if(window.XMLHttpRequest)n=new XMLHttpRequest;else{if(!window.ActiveXObject)return;n=new window.ActiveXObject("Microsoft.XMLHTTP")}n.open("POST",e,!0),"undefined"!=typeof n.setRequestHeader&&(n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Accept","application/json, text/javascript, */*;")),n.send(t)},n.parseConfig=function(e,t){var n,i,a,s,u,d,f,p,c,l;if("undefined"==typeof e||"undefined"==typeof e.queue){var g=window.AJS=window.AJS||{};g.EventQueue=g.EventQueue||[],n=g.EventQueue}else n=e.queue;return i="undefined"==typeof e||"undefined"==typeof e.analyticsserver?"analytics.atlassian.com":e.analyticsserver,a="undefined"==typeof e||"undefined"==typeof e.analyticsurl?"/analytics/events":e.analyticsurl,s="undefined"==typeof e||"undefined"==typeof e.server?t.getServerName():e.server,u="undefined"==typeof e||"undefined"==typeof e.product?t.getProductNameFromServerName(s):e.product,"undefined"==typeof e||"undefined"==typeof e.subproduct?(d=t.getSubdomain(s),"undefined"==typeof d&&(d="-")):d=e.subproduct,f="undefined"==typeof e||"undefined"==typeof e.ajax?t.ajaxPost:e.ajax,p="undefined"==typeof e||"undefined"==typeof e.maxevents?r:e.maxevents,c="undefined"==typeof e||"undefined"==typeof e.storage_key?o+t.generateRandomStorageKey()+t.generateRandomStorageKey():e.storage_key,l="undefined"==typeof e||"undefined"==typeof e.user?"default":e.user,{queue:n,gasServer:i,gasUrl:a,serverName:s,productName:u,subProductName:d,post:f,maxevents:p,storage_key:c,user:l}},t=n.parseConfig(e,n),n.config=t,n.pushToServer=function(e,o){var r="undefined"!=typeof o?o:n.config.post,i="https://"+t.gasServer+t.gasUrl,a={events:e},s=JSON.stringify(a);r(i,s)},n.addEventsToArray=function(e,t,o){if("undefined"!=typeof o&&"undefined"!=typeof o.server&&"undefined"!=typeof o.product&&"undefined"!=typeof o.subproduct&&"undefined"!=typeof o.user)for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(t.length>=n.config.maxevents)break;if(i.name&&i.properties){var a={name:i.name,properties:i.properties,serverTime:i.time||(new Date).getTime(),server:o.server,user:o.user,product:o.product,subproduct:o.subproduct};t.push(a)}}},n.publishFromQueueAndStorage=function(e){var o="undefined"!=typeof e?e:n.pushToServer,r=[];if(!(t.queue.length<1&&window.sessionStorage.length<1)){var i={server:t.serverName,user:t.user,product:t.productName,subproduct:t.subProductName};n.addEventsToArray(t.queue,r,i);var a=n.popEventsFromStorage();n.addEventsToArray(a,r,i),t.queue.length=0,r&&r.length&&o(r)}},n.serialiseEventsToString=function(e){return JSON.stringify(e)},n.deserialiseEvents=function(e){return JSON.parse(e)},n.storeEvents=function(e){if("undefined"!=typeof window.sessionStorage){if(window.sessionStorage[t.storage_key]){var o=n.deserialiseEvents(window.sessionStorage[t.storage_key])||[];o.length<n.config.maxevents&&o.push.apply(o,e),e=o}try{window.sessionStorage.setItem(t.storage_key,n.serialiseEventsToString(e))}catch(r){}}},n.popEventsFromStorage=function(){if("undefined"==typeof window.sessionStorage)return[];if(window.sessionStorage[t.storage_key]){var e=n.deserialiseEvents(window.sessionStorage[t.storage_key]);return window.sessionStorage[t.storage_key]=n.serialiseEventsToString([]),e}return[]},n.moveQueueToStorage=function(){0!==t.queue.length&&"undefined"!=typeof window.sessionStorage&&(n.storeEvents(t.queue),t.queue.length=0)},n.start=function(){var e=Array.prototype.push;t.queue.push=function(n){n.time=(new Date).getTime(),e.call(t.queue,n)},setInterval(n.publishFromQueueAndStorage,5e3),setInterval(n.moveQueueToStorage,1e3)},"undefined"==typeof window.onunload&&(window.onunload=function(){n.moveQueueToStorage()}),n},window["herment-gas-client"]=e,window.define&&window.define("herment",[],function(){return e})}()},9:function(e,t,n){"use strict";e.exports={happy:["Hold tight. Shouldn't take too long.","Just a sec.","One HipChat, coming right up.","Relax. We got this.","Here it comes.","Let's get started.","Workin' on it."],sad:["Yikes. This really is taking a while...","Looks like a sec wasn't enough. Give us a minute...","Well... coming up soon...","Oh man. Don't freak out, we still got this...","This hardly ever happens...","Looks like we'll be starting a little late...","Still workin' here... You sure do look nice today..."]}}});
//# sourceMappingURL=preload-20150403161840.js.map